<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - View</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/View.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap">

    <style>
        /* Font chữ Roboto */
        body {
            font-family: 'Roboto', sans-serif;
        }

        /* Navbar tùy chỉnh */
        .navbar {
            font-size: 1.1rem;
            border-radius: 10px;
        }

        /* Dropdown menu ẩn mũi tên */
        .dropdown-toggle::after {
            display: none;
        }

        /* Tùy chỉnh thanh tìm kiếm ẩn/hiện */
        .search-form {
            transition: all 0.5s ease; /* Tăng thời gian chuyển tiếp để tạo hiệu ứng mượt mà */
            width: 0; /* Kích thước ban đầu */
            overflow: hidden; /* Ẩn nội dung */
            opacity: 0; /* Ẩn thanh tìm kiếm */
            position: absolute; /* Để có thể căn chỉnh đúng vị trí */
            right: -10px; /* Ẩn ra bên ngoài khi không hiển thị */
        }

        .search-input {
            border-radius: 20px;
            padding: 5px 10px;
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
            height: 38px; /* Chiều cao bằng với icon */
            width: 200px; /* Kích thước của ô input */
            opacity: 0; /* Ẩn ô input ban đầu */
            transition: opacity 0.5s ease; /* Hiệu ứng mờ cho ô input */
        }

        /* Kích hoạt khi thanh tìm kiếm hiển thị */
        .search-form.active {
            width: 200px; /* Kích thước ô tìm kiếm */
            opacity: 1; /* Hiện thanh tìm kiếm */
            right: 0; /* Di chuyển ô tìm kiếm vào vị trí */
        }

        .search-input.active {
            opacity: 1; /* Hiện ô input khi kích hoạt */
            margin-right: 0px; /* Khoảng cách giữa ô input và nút tìm kiếm */
        }

        /* Hiệu ứng hover cho biểu tượng */
        .nav-link i {
            font-size: 1.3rem;
            color: #555;
            transition: color 0.3s ease, transform 0.3s ease;
        }

        .nav-link:hover i {
            transform: scale(1.1);
        }

        /* Căn giữa và tăng khoảng cách các item */
        .navbar-nav {
            align-items: center;
        }

        .navbar-brand, .nav-link {
            font-weight: 500;
            color: #333;
        }

        /* Kích thước tiêu đề lớn hơn */
        .navbar-brand {
            font-size: 1.5rem;
            font-weight: bold;
        }

        /* Loại bỏ viền khi nhấn nút tìm kiếm */
        .search-icon {
            outline: none; /* Loại bỏ viền màu xanh khi nhấn */
            border: none; /* Loại bỏ viền mặc định của nút */
            background: none; /* Xóa nền của nút */
            cursor: pointer; /* Hiển thị con trỏ tay khi hover */
        }

            /* Thêm hiệu ứng hover cho nút tìm kiếm */
        .btn search-icon:hover {
                transform: scale(1.1); /* Tăng kích thước khi hover */
                transition: transform 0.3s ease; /* Hiệu ứng chuyển tiếp */
            }
    </style>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-sm navbar-light bg-white border-bottom box-shadow mb-3 py-3" style="padding: 0 40px;">
            <div class="container-fluid">
                <!-- Logo thương hiệu -->
                <a class="navbar-brand fw-bold" asp-area="" asp-controller="Home" asp-action="Index">MyShop</a>

                <!-- Nút bật/tắt cho chế độ di động -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Nội dung thanh điều hướng -->
                <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                    <!-- Liên kết trung tâm -->
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item">
                            <a class="nav-link active" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="Customer" asp-action="ViewProduct">Products</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="" asp-action="">Sale</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="" asp-action="">About us</a>
                        </li>
                    </ul>

                    <!-- Liên kết bên phải: Tìm kiếm, Cart, User -->
                    <ul class="navbar-nav">
                        <!-- Icon tìm kiếm và thanh tìm kiếm -->
                        <li class="nav-item me-3 position-relative">
                            <form class="search-form" asp-area="" asp-controller="Home" asp-action="Search" method="get">
                                <input class="form-control search-input" type="search" name="query" placeholder="Search..." aria-label="Search">
                            </form>
                            <a class="btn search-icon" id="searchToggle" aria-label="Search">
                                <i class="fas fa-search"></i>
                            </a>
                        </li>

                        <!-- Icon giỏ hàng -->
                        <li class="nav-item me-3">
                            <a class="nav-link" asp-area="" asp-controller="Cart" asp-action="Index">
                                <i class="fas fa-shopping-cart cart-icon"></i>
                            </a>
                        </li>

                        <!-- Dropdown tài khoản người dùng -->
                        @if (User.Identity.IsAuthenticated)
                        {
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    @User.FindFirst("Name")?.Value <!-- Hiển thị tên người dùng khi đăng nhập -->
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                                    <li><a class="dropdown-item" asp-area="" asp-controller="Account" asp-action="Profile">Thông tin người dùng</a></li>
                                    <li><a class="dropdown-item" asp-area="" asp-controller="Order" asp-action="">Danh sách đơn hàng</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" asp-area="" asp-controller="Account" asp-action="Logout">Đăng xuất</a></li>
                                </ul>
                            </li>
                        }
                        else
                        {
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Account" asp-action="Login">
                                    <i class="fas fa-sign-in-alt login-icon"></i> <!-- Icon đăng nhập nếu chưa đăng nhập -->
                                </a>
                            </li>
                        }
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="border-top footer text-muted">
        <div class="container">
            &copy; 2024 - View - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
        </div>
    </footer>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)


    <script>
        // Toggle hiển thị thanh tìm kiếm khi nhấn vào icon
        document.getElementById("searchToggle").addEventListener("click", function () {
            const searchForm = document.querySelector(".search-form");
            const searchInput = document.querySelector(".search-input");
            searchForm.classList.toggle("active");
            searchInput.classList.toggle("active");
        });

        // Ẩn thanh tìm kiếm khi nhấn ra ngoài
        document.addEventListener("click", function (e) {
            const searchForm = document.querySelector(".search-form");
            const searchInput = document.querySelector(".search-input");
            const searchIcon = document.getElementById("searchToggle");

            if (!searchForm.contains(e.target) && e.target !== searchIcon) {
                searchForm.classList.remove("active");
                searchInput.classList.remove("active");
            }
        });
    </script>

</body>
</html>
